import{a as R}from"./chunk-GHPPKIGU.js";import{a as k,b as T,c as V,d as M,f as N,h as A,i as I,j as P,k as O,l as B,m as z,n as G,o as H,p as j,q}from"./chunk-OLX4P3BV.js";import{a as w}from"./chunk-7LF3CIKX.js";import{p as D}from"./chunk-YFI3VPVI.js";import{Ea as S,Ga as U,Ia as b,La as i,Ma as n,Na as g,Oa as v,Pa as d,Qa as F,Ra as E,Sa as o,Ua as f,W as p,Za as x,da as s,ea as u,ja as y,ua as m,va as c}from"./chunk-QR7DDJMX.js";function Q(a,t){a&1&&(i(0,"p"),o(1,"\u23F3 En cour de Telecharghement..."),n())}function W(a,t){a&1&&(i(0,"p"),o(1,"\u2705 Reussie!"),n())}function X(a,t){a&1&&(i(0,"p"),o(1,"\u274C Erreur!"),n())}function Y(a,t){a&1&&(i(0,"p"),o(1,"\u23F3 \u{1F636}En attente de fichier..."),n())}function Z(a,t){if(a&1){let e=v();i(0,"section",4),o(1," Details du Fichier: "),i(2,"ul")(3,"li"),o(4),n(),i(5,"li"),o(6),n(),i(7,"li"),o(8),n()()(),i(9,"button",3),d("click",function(){s(e);let l=F();return u(l.onUpload())}),o(10,"Telechargement du Fichier"),n(),i(11,"section"),S(12,Q,2,0,"p")(13,W,2,0,"p")(14,X,2,0,"p")(15,Y,2,0,"p"),n()}if(a&2){let e,r=F();m(4),f("Nom: ",r.file.name,""),m(2),f("Type: ",r.file.type,""),m(2),f("Taille: ",r.file.size," bytes"),m(4),b((e=r.status)==="telechargement"?12:e==="succes"?13:e==="rate"?14:15)}}var h=class a{constructor(t){this.http=t}fileUploaded=new y;status="initial";file=null;ngOnInit(){}onChange(t){let e=t.target.files[0];e&&(this.status="initial",this.file=e)}onUpload(){this.file&&(this.status="telechargement",console.log("Uploading file:",this.file),this.fileUploaded.emit(this.file),this.status="succes")}static \u0275fac=function(e){return new(e||a)(c(D))};static \u0275cmp=p({type:a,selectors:[["app-single-file-upload"]],outputs:{fileUploaded:"fileUploaded"},standalone:!0,features:[x],decls:8,vars:1,consts:[["fileUpload",""],[1,"file-upload-container"],["type","file",1,"file-input",3,"change"],[1,"custom-upload-button",3,"click"],[1,"file-info"]],template:function(e,r){if(e&1){let l=v();i(0,"div",1)(1,"h2"),o(2,"Telecharger un Fichier"),n(),i(3,"input",2,0),d("change",function(_){return s(l),u(r.onChange(_))}),n(),i(5,"button",3),d("click",function(){s(l);let _=E(4);return u(_.click())}),o(6,"Choisir un fichier"),n(),S(7,Z,16,4),n()}e&2&&(m(7),b(r.file?7:-1))},styles:[".file-input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}.file-info[_ngcontent-%COMP%]{margin:10px;padding:10px;border-radius:20px;border:1px solid var(--main-text-color)}.file-upload-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin-top:20px;border-radius:20px;color:var(--main-text-color);padding:10px}.custom-upload-button[_ngcontent-%COMP%]{margin:10px;padding:10px;background-color:var(--main-button-color);color:var(--main-button-text-color);font-size:var(--font-size-small);border:none;border-radius:5px;cursor:pointer}"]})};var L=class a{constructor(t,e){this.formBuilder=t;this.chargingStationService=e;this.chargingStationForm=this.formBuilder.group({uuid:this.generateUUID(),name:"",localisation:this.formBuilder.group(new w("","",0)),availability:!0,pricePerHour:0,created:new Date,medias:this.formBuilder.array([])})}chargingStationForm;uuid=this.generateUUID();name="";availability=!0;pricePerHour=0;created=new Date;medias=[];onSubmit(){let t=this.chargingStationForm.value;t.created=new Date,t.uuid=this.generateUUID(),console.log("Valeur du Formulaire:",t),this.chargingStationService.addChargingStation(t),this.chargingStationForm.reset()}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}onFileUploaded(t){let e=this.chargingStationForm.get("medias");if(e&&e instanceof G){let r=new N(t);e.push(r),e.markAsDirty(),e.updateValueAndValidity()}}static \u0275fac=function(e){return new(e||a)(c(H),c(R))};static \u0275cmp=p({type:a,selectors:[["app-charging-station-add"]],standalone:!0,features:[x],decls:15,vars:1,consts:[[1,"form-station-content",3,"formGroup"],["for","name"],["formControlName","name","id","name","name","name","type","text","required",""],["for","availability"],["formControlName","availability","id","availability","name","availability","type","checkbox","required",""],["for","prix"],["formControlName","pricePerHour","id","prix","name","prix","type","number"],[3,"fileUploaded"],["type","submit",1,"button-add-charging",3,"click","keydown.enter"]],template:function(e,r){e&1&&(i(0,"form",0)(1,"label",1),o(2,"Nom"),n(),g(3,"input",2),i(4,"label",3),o(5,"Disponibilit\xE9"),n(),g(6,"input",4),i(7,"label",5),o(8,"Prix"),n(),g(9,"input",6),i(10,"label"),o(11,"Photo"),n(),i(12,"app-single-file-upload",7),d("fileUploaded",function(C){return r.onFileUploaded(C)}),n(),i(13,"button",8),d("click",function(){return r.onSubmit()})("keydown.enter",function(){return r.onSubmit()}),o(14," Add Station "),n()()),e&2&&U("formGroup",r.chargingStationForm)},dependencies:[j,A,T,I,k,V,M,B,z,q,P,O,h],styles:[".form-station-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;background-color:var(--main-background-color);padding:20px;border-radius:10px;box-shadow:0 0 10px #0003;margin:10px;width:100%}.button-add-charging[_ngcontent-%COMP%]{margin-top:10px;padding:10px 20px;background-color:var(--main-button-color);color:var(--main-button-text-color);font-size:var(--font-size-small);border:none;border-radius:5px;cursor:pointer}"]})};export{L as ChargingStationAddComponent};
